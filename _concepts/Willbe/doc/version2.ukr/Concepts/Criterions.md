# Критеріон

Елемент порівняння в `will-файлі` для визначення умов використання ресурса.  

Критеріони формують собою асоціативний масив (карту критеріонів) для ресурса, яка зберігає дані у вигляді набору пар ключ-значення, при цьому, масив не містить дві пари з однаковими ключами. Утилiта `willbe` порівнює повністю мапи критеріонів збірки і ресурса, таким чином, доступ до ресурса `will-файла` можливий при співпадінні цих мап.     

### Приклад побудови таблиці істинності
При відладці (`debug`) збірка використовує крок `build.debug`, а при виконанні реліз-побудови (`debug` не виконується), використовується крок `build.release`.  Іншими словами, є один ключ-критеріон (`debug`) та дві кроки, які залежать від його значення. Тоді таблиця істинності має вигляд:  

| Критеріон `debug` | Крок `build.debug` | Крок `build.release` |
|-------------------|--------------------|----------------------|
| 1                 | 1                  | 0                    |
| 0                 | 0                  | 1                    |

Приклад іллюструє вибір на основі одного критеріону, а ресурс може мати довільне число критеріонів для створення унікальних умов доступу до ресурса. Якщо число критеріонів збільшується, то структура таблиці ускладнюється.  

### Використання  
- Для критеріонів прийнято використовувати значення "0" та "1".  
- Критеріон `default` вказується в збірці секції `build`, яка буде виконуватись за замовчуванням. 

![default.criterion.png](./Images/default.criterion.png) 

Для побудови збірки `release` вводиться фраза `will .build` без аргумента.
- В одному `will-файлі` одночасно може бути дві збірки за замовчуванням - для побудови і для експорту. 
- Критеріон `export` в поєднанні з критеріоном `default` позначає збірку експорту за замовчуванням. Без критеріона `default`, критеріон `export` - звичайний критеріон утиліти.

![export.criterion.png](./Images/export.criterion.png) 

- Порівняння мап критеріонів проходить, якщо в посиланні на ресурс використовуються ґлоби, тобто, припускається, що є декілька ресурсів, які входять в вибірку селектора. 
- При використанні простого селектора - прямого посилання на ресурс - критеріони ігноруються.  
На рисунку крок `export.multi` буде виконано хоча критеріони не співпадають.

![direct.selector.png](./Images/direct.selector.png)  

- Якщо в мапі критеріонів ресурса не вказаний критеріон-ключ, який є в мапі критеріонів збірки, то ресурс валідує його з будь-яким значенням. 

![no.criterions.png](./Images/no.criterions.png) 

Зазначений крок `proto.release` буде виконаний при будь-якому значенні критеріона `debug` в збірці `release`. Якщо в збірку додати інші критеріони, ситуація залишиться без змін.
